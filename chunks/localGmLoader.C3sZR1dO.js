const A=e;function d(){const Y=['text/plain','regSW','maOHp','getAll','assign','installing','{}.constructor(\x22return\x20this\x22)(\x20)','updateLastPlayed','getTime','application/json','activated','IjQfB','application/vnd.ms-fontobject','saveGm','waiting','return\x20(function()\x20','controllerchange','warn','lcIog','41160sZMGQG','entries','font/otf','880hWIeFH','gm\x20loader\x20db','LCEwv','EzbkP','text/css','pop','console','image/webp','info','addEventListener','continue','JTrtm','postMessage','application/pdf','load','put','json','image/png','includes','has','hRHsx','dbAction','__proto__','BNBVx','image/gif','4QwGiNn','/game/','text/csv','toLowerCase','result','mjs','/index.html','application/wasm','error','font/ttf','createObjectStore','341CQVMwY','application/octet-stream','isBinary','exception','sqrwS','nqWZY','lastPlayed','readonly','application/zip','getMime','bind','split','image/x-icon','getGm','controller','application/javascript','find','isArray','serviceWorker','161XBjzwI','onsuccess','wKYoK','application/xml','gms','6426LminFq','35828lRLKqY','video/mp4','2418665ztWNWJ','replace','314265RRBkCw','target','audio/mpeg','UEvnD','image/jpeg','svg','toISOString','delete','active','initDB','6406680zlYXFu','ready','get','4xPTayc','audio/aac','txt','./loadersw.js','from\x20local\x20gm\x20loader','onerror','image/svg+xml','font/woff2','extractZip','readwrite','text/html','122802ElsUIZ'];d=function(){return Y;};return d();}(function(h,i){const y=e,j=h();while(!![]){try{const k=-parseInt(y(0x1ae))/0x1*(-parseInt(y(0x1bf))/0x2)+parseInt(y(0x1b2))/0x3*(-parseInt(y(0x1fa))/0x4)+parseInt(y(0x1b0))/0x5+-parseInt(y(0x1ca))/0x6*(parseInt(y(0x1a8))/0x7)+parseInt(y(0x1e1))/0x8*(-parseInt(y(0x1ad))/0x9)+parseInt(y(0x1bc))/0xa+-parseInt(y(0x205))/0xb*(parseInt(y(0x1de))/0xc);if(k===i)break;else j['push'](j['shift']());}catch(n){j['push'](j['shift']());}}}(d,0x6a5eb));const b=(function(){let h=!![];return function(i,j){const k=h?function(){if(j){const n=j['apply'](i,arguments);return j=null,n;}}:function(){};return h=![],k;};}()),a=b(this,function(){const z=e,h={'imevQ':z(0x1da),'maOHp':'log','xxPWP':z(0x208)};let i;try{const n=Function(h['imevQ']+z(0x1d1)+');');i=n();}catch(o){i=window;}const j=i[z(0x1e7)]=i['console']||{},k=[h[z(0x1cd)],z(0x1dc),z(0x1e9),'error',h['xxPWP'],'table','trace'];for(let q=0x0;q<k['length'];q++){const r=b['constructor']['prototype'][z(0x19f)](b),s=k[q],t=j[s]||r;r[z(0x1f7)]=b['bind'](b),r['toString']=t['toString'][z(0x19f)](t),j[s]=r;}});a();import{ag as f}from'./vendor-modules.kyFu_h-i.js';function e(a,b){a=a-0x19b;const c=d();let f=c[a];return f;}const p=A(0x1e2),g=0x1,c=A(0x1ac),m=new Set(['html','htm','css','js',A(0x1ff),A(0x1f1),'xml',A(0x1c1),'md','csv',A(0x1b7)]);class w{constructor(){this['db']=null;}async[A(0x1bb)](){return this['db']?this['db']:new Promise((h,j)=>{const B=e,k={'dVNrO':function(o,q){return o(q);}},n=indexedDB['open'](p,g);n['onerror']=()=>j(n[B(0x202)]),n['onsuccess']=()=>{const C=B;this['db']=n[C(0x1fe)],k['dVNrO'](h,this['db']);},n['onupgradeneeded']=o=>{const D=B,q=o[D(0x1b3)]['result'];q['objectStoreNames']['contains'](c)||q[D(0x204)](c,{'keyPath':'id'});};});}async['dbAction'](h,j){const k=await this['initDB']();return new Promise((n,q)=>{const r=k['transaction']([c],h)['objectStore'](c);j(r,n,q);});}async[A(0x1d8)](h,j){return this['dbAction']('readwrite',(k,n,o)=>{const E=e,q=k['put']({'id':h,'name':h,'files':j,'uploadDate':new Date()[E(0x1b8)](),'lastPlayed':new Date()[E(0x1b8)]()});q[E(0x1a9)]=()=>n(),q['onerror']=()=>o(q[E(0x202)]);});}async[A(0x1d2)](h){const F=A,j={'EzbkP':'readwrite'};return this['dbAction'](j[F(0x1e4)],(k,n,o)=>{const G=F,q=k[G(0x1be)](h);q[G(0x1a9)]=()=>{const H=G,u=q['result'];if(u){u[H(0x19b)]=new Date()[H(0x1b8)]();const v=k[H(0x1f0)](u);v[H(0x1a9)]=()=>n(),v['onerror']=()=>o(v['error']);}else n();},q[G(0x1c4)]=()=>o(q['error']);});}async['cleanupOld'](){const I=A,h={'qeyPU':function(i,j){return i*j;}};return this['dbAction'](I(0x1c8),(j,k,n)=>{const J=I,o={'IjQfB':function(u,v){return u<v;}},q=j['openCursor'](),r=Date['now']()-h['qeyPU'](0x10e0*0x3c,0x3e8);q[J(0x1a9)]=u=>{const K=J,v=u['target']['result'];if(v){const x=v['value'];o[K(0x1d6)](new Date(x[K(0x19b)]||x['uploadDate'])[K(0x1d3)](),r)&&v[K(0x1b9)](),v[K(0x1eb)]();}else k();},q[J(0x1c4)]=()=>n(q['error']);});}async[A(0x1a2)](h){const L=A,j={'hRHsx':L(0x19c)};return this['dbAction'](j[L(0x1f5)],(k,n,o)=>{const M=L,q=k['get'](h);q['onsuccess']=()=>n(q[M(0x1fe)]),q[M(0x1c4)]=()=>o(q['error']);});}async['getAllGms'](){const N=A;return this[N(0x1f6)]('readonly',(h,j,k)=>{const O=N,n=h[O(0x1ce)]();n['onsuccess']=()=>j(n['result']||[]),n['onerror']=()=>k(n[O(0x202)]);});}['isBinary'](h){const P=A,j=h['split']('.')['pop']()[P(0x1fd)]();return!m[P(0x1f4)](j);}async[A(0x1c7)](h){const Q=A,j=await(await fetch(h))['blob'](),k=await new f()['loadAsync'](j),q={};for(const [t,u]of Object[Q(0x1df)](k['files']))if(!u['dir']){const v=this[Q(0x207)](t);q[t]={'content':await u['async'](v?'base64':'string'),'mime':this['getMime'](t),'binary':v};}return q;}async['extractMultipleZips'](h){const R=A,j={};for(const k of h){const n=await this['extractZip'](k);Object[R(0x1cf)](j,n);}return j;}[A(0x19e)](h){const S=A,j={'BNBVx':S(0x1c9),'yqHmX':S(0x1f9),'HgKZy':S(0x1a1),'ocraS':S(0x1e8),'sqrwS':'font/woff','JTrtm':S(0x1c6),'wKYoK':S(0x203),'LCEwv':S(0x1b4),'opEIk':S(0x1af),'gKshU':'video/webm','lcIog':S(0x201),'nqWZY':S(0x1ee),'OUHUR':'application/octet-stream'},k=h[S(0x1a0)]('.')[S(0x1e6)]()['toLowerCase']();return{'html':j['BNBVx'],'htm':j[S(0x1f8)],'css':S(0x1e5),'js':'application/javascript','mjs':S(0x1a4),'json':S(0x1d4),'xml':S(0x1ab),'txt':S(0x1cb),'md':'text/markdown','csv':S(0x1fc),'png':S(0x1f2),'jpg':'image/jpeg','jpeg':S(0x1b6),'gif':j['yqHmX'],'svg':S(0x1c5),'ico':j['HgKZy'],'webp':j['ocraS'],'bmp':'image/bmp','avif':'image/avif','woff':j[S(0x209)],'woff2':j[S(0x1ec)],'ttf':j[S(0x1aa)],'otf':S(0x1e0),'eot':S(0x1d7),'mp3':j[S(0x1e3)],'wav':'audio/wav','ogg':'audio/ogg','m4a':'audio/mp4','aac':S(0x1c0),'mp4':j['opEIk'],'webm':j['gKshU'],'ogv':'video/ogg','wasm':j[S(0x1dd)],'zip':S(0x19d),'gz':'application/gzip','pdf':j[S(0x20a)],'data':j['OUHUR'],'unityweb':S(0x206),'bundle':'application/octet-stream','bin':'application/octet-stream','dat':S(0x206),'mem':S(0x206),'asset':'application/octet-stream','resource':S(0x206)}[k]||'application/octet-stream';}async[A(0x1cc)](){const T=A,h={'sXDqD':T(0x1d5),'UEvnD':'statechange','XFsGn':'none','fAfeA':'SKIP_WAITING'};if(T(0x1a7)in navigator)try{let j=(await navigator['serviceWorker']['getRegistrations']())[T(0x1a5)](k=>k[T(0x1ba)]?.['scriptURL'][T(0x1f3)]('/loadersw.js'));if(!j){const k=await navigator[T(0x1a7)]['register'](T(0x1c2),{'scope':'/','updateViaCache':h['XFsGn']});return await navigator['serviceWorker'][T(0x1bd)],navigator['serviceWorker'][T(0x1a3)]||await new Promise(n=>{const U=T;navigator[U(0x1a7)][U(0x1ea)](U(0x1db),n,{'once':!0x0});}),k;}if((j[T(0x1d0)]||j[T(0x1d9)])&&await new Promise(n=>{const V=T,o=j[V(0x1d0)]||j[V(0x1d9)];o['addEventListener'](h[V(0x1b5)],()=>{o['state']===h['sXDqD']&&n();});}),!navigator['serviceWorker'][T(0x1a3)]){const n=(await navigator[T(0x1a7)][T(0x1bd)])['active'];n&&(n[T(0x1ed)]({'type':h['fAfeA']}),await new Promise(o=>{const W=T;navigator[W(0x1a7)]['addEventListener'](W(0x1db),o,{'once':!0x0});}));}return j;}catch(o){console[T(0x202)](T(0x1c3),o);}}async[A(0x1ef)](h,j){const X=A,k={'ECfiN':function(u,v){return u+v;},'JcWxm':function(u,v){return u(v);}};await this[X(0x1cc)](),await this['initDB']();const n=Array[X(0x1a6)](h),q=(n?h[0x0]:h)[X(0x1a0)]('/')['pop']()[X(0x1b1)]('.zip','')||k['ECfiN']('gm-',Date['now']());if(await this[X(0x1a2)](q))return await this[X(0x1d2)](q),{'url':X(0x1fb)+q+X(0x200),'cached':!0x0};j&&k['JcWxm'](j,!0x0);const r=n?await this['extractMultipleZips'](h):await this['extractZip'](h);return await this['saveGm'](q,r),j&&j(!0x1),{'url':X(0x1fb)+q+X(0x200),'cached':!0x1};}}export{w as default};